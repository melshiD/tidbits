<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Jet Screamer Style Soundwave </title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.1/gsap.min.js"></script>
	<!-- Your code that needs compiling goes in a type="text/babel" `script` tag -->
	<script type="text/babel" data-presets="react,stage-3">
		const MainContent = () => {
			return <div>Hello, React!</div>;
		};

		ReactDOM.render(<MainContent />, document.getElementById("root"));
	</script>

	<div id="root"></div>

	<!-- This is what supports JSX compilation (and other transformations) -->
	<script src="https://unpkg.com/@babel/standalone@7.10.3/babel.min.js"></script>

	<!-- These are for React -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.development.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.development.js"></script>

</head>
<style>
	* {
		--orange: #e0a65a;
		--arch-blue: #4ea5e7;
		--background-blue: #121727;

	}

	html,
	body {
		background-color: #121727;
	}

	body {
		display: flex;
		justify-content: space-between;
	}

	img {
		width: 20%;
	}

	svg {
		width: 1200;
	}

	#follow {
		fill: none;
		stroke: grey;
		stroke-width: 2;
	}
	#follow_line{
		width: 500px;
	}
	#squiggle {
		fill: none;
		stroke: rgb(108, 51, 241);
		stroke-width: 2;
	}
</style>

<body>
	<img src="../Images/jet_screamer_soundwave.jpg" alt="" srcset="">
	<svg viewBox="0 0 500 200" fill="none">
		<path d="M20 100 Q40 -200, 60 100" stroke="pink" ></path>
		<path d="M20 50 C50 50, 50 250, 80 50 
							S90 50, 130 50 
							S190 250, 230 50
							S250 100, 300 100 " stroke="red"></path>
	</svg>
	<svg id="follow_line"width="500" height="400">
		<path id="follow" d="M 50,300 h 50,100 100,100 350,250 " />
		<path id="squiggle" d="M0,0" />
	</svg>
	<svg viewBox="0 0 500 200" >
		<path d="M 20 180" />
	</svg>
	<svg viewBox="0 0 5000 5000">
		<!-- back-side of wave-rings need to render on this side of the main form, the rest after  -->
		<path class="blue-ring-b" transform="translate(-1 6)" stroke="#4ea5e7" fill="none" stroke-width="24"
			d="M 3300 2150 A 20 120 0 1 1 3300 2850" />
		<path class="green-ring-b" transform="translate(-1 6)" stroke="#59c365" fill="none" stroke-width="24"
			d="M 2300 3150 A 30 150 0 0 0 2300 1850" />
		<path class="pink-ring-b" transform="translate(-1 6)" stroke="#4ea5e7" fill="none" stroke-width="24"
			d="M 3300 2150 A 20 120 0 1 1 3300 2850" />
		<path class="pinkRed-ring-b" transform="translate(-1 6)" stroke="#4ea5e7" fill="none" stroke-width="24"
			d="M 3300 2150 A 20 120 0 1 1 3300 2850" />
		<ellipse cx="2500" cy="2500" rx="1500" ry="75" fill="none" stroke="#e0a65a" stroke-width="20" />
		<path class="blue-ring-f" z-indes="10" transform="translate(0 4)" stroke="#4ea5e7" fill="none" stroke-width="27"
			d="M 3300 2150 A 20 120 0 0 0 3300 2850" />
		<path class="green-ring-f" z-indes="10" transform="translate(0 4)" stroke="#59c365" fill="none" stroke-width="27"
			d="M 2300 3150 A 30 150 0 1 1 2300 1850" />
		<path class="pink-ring-f" z-indes="10" transform="translate(0 4)" stroke="#4ea5e7" fill="none" stroke-width="27"
			d="M 3300 2150 A 20 120 0 0 0 3300 2850" />
		<path class="pinkRed-ring-f" z-indes="10" transform="translate(0 4)" stroke="#4ea5e7" fill="none" stroke-width="27"
			d="M 3300 2150 A 20 120 0 0 0 3300 2850" />
	</svg>
	<button onclick="singing()">
		Animate
	</button>

	<script>
		let target = document.querySelector('ellipse');

		const singing = () => {
			gsap.to(target, {
				attr: { rx: 2000 },
				duration: 3,
				ease: "elastic"
			});
			gsap.to(target, {
				attr: { ry: 150 },
				duration: .05,
				ease: "roughEase",
				repeat: -1,
				yoyo: true
			});
			gsap.to('.blue-ring-b', {
				attr: { d: "M 3300 1800 A 20 120 0 1 1 3300 3200" },
				duration: 2,
				ease: "roughEase",
				repeat: -1,
				yoyo: true
			})
			gsap.to('.blue-ring-f', {
				attr: { d: "M 3300 1800 A 20 120 0 0 0 3300 3200" },
				duration: 2,
				ease: "roughEase",
				repeat: -1,
				yoyo: true
			})
		}

		function makeSquiggle(squigglePathId, followPathId, squiggleStep, squiggleAmplitude) {
			//d="M 50,300 h 50,100 100,100 350,250 "
			var followPath = document.getElementById(followPathId);
			var pathLen = followPath.getTotalLength();

			// Adjust step so that there are a whole number of steps along the path
			var numSteps = Math.round(pathLen / squiggleStep);

			var pos = followPath.getPointAtLength(0);
			var newPath = "M" + [pos.x, pos.y].join(',');
			var side = -1;
			for (var i = 1; i <= numSteps; i++) {
				var last = pos;
				var pos = followPath.getPointAtLength(i * pathLen / numSteps);

				// Find a point halfway between last and pos. Then find the point that is
				// perpendicular to that line segment, and is squiggleAmplitude away from
				// it on the side of the line designated by 'side' (-1 or +1).
				// This point will be the control point of the quadratic curve forming the
				// squiggle step.

				// The vector from the last point to this one
				var vector = {
					x: (pos.x - last.x),
					y: (pos.y - last.y)
				};
				// The length of this vector
				var vectorLen = Math.sqrt(vector.x * vector.x + vector.y * vector.y);
				// The point halfwasy between last point and tis one
				var half = {
					x: (last.x + vector.x / 2),
					y: (last.y + vector.y / 2)
				};
				// The vector that is perpendicular to 'vector'
				var perpVector = {
					x: -(squiggleAmplitude * vector.y / vectorLen),
					y: (squiggleAmplitude * vector.x / vectorLen)
				};
				// No calculate the control point position
				var controlPoint = {
					x: (half.x + perpVector.x * side),
					y: (half.y + perpVector.y * side)
				};
				newPath += ("Q" + [controlPoint.x, controlPoint.y, pos.x, pos.y].join(','));
				// Switch the side (for next step)
				side = -side;
			}
			var squigglePath = document.getElementById(squigglePathId);
			squigglePath.setAttribute("d", newPath);
		}


		makeSquiggle("squiggle", "follow", 5, 20);
	</script>

</body>

</html>